import { computed, ref } from 'vue'

export type Locale =
  | 'zh-CN'
  | 'zh-TW'
  | 'en-US'
  | 'ja-JP'
  | 'ko-KR'
  | 'fr-FR'
  | 'de-DE'
  | 'es-ES'
  | 'ru-RU'

const messages: Record<Locale, Record<string, string>> = {
  'zh-CN': {
    'app.title': '项目甘特图管理系统',
    'app.newRootTask': '新建根任务',
    'app.customFields': '自定义字段',
    'app.hideBaseline': '隐藏基线',
    'app.showBaseline': '显示基线',
    'app.saveBaseline': '保存基线',
    'app.performanceTest': '性能测试(1000条)',
    'app.normalData': '切换正常数据',
    'app.refreshData': '刷新数据',
    'app.criticalPath': '关键路径分析',
    'app.dependencyValidation': '依赖验证',
    'app.constraintValidation': '约束验证',
    'app.currentLanguage': '当前语言',
    'app.locale.zh-CN': '简体中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': '没有可用的任务数据',
    'app.pleaseSaveBaseline': '请先保存基线',
    'app.baselineShown': '基线已显示',
    'app.baselineHidden': '基线已隐藏',
    'app.baselineSaved': '基线已保存',
    'app.dependencyValidated': '依赖验证完成',
    'app.criticalPathAnalyzed': '关键路径分析完成',
    'app.constraintValidated': '约束验证完成',
    'app.switchModeSuccess': '切换成功',
    'app.switchModeFailed': '切换失败，请稍后重试',
    'app.fieldDeleteSuccess': '字段删除成功',
    'app.addOption': '添加选项',
    'app.addField': '添加字段',
    'app.updateField': '更新字段',
    'app.saveFields': '保存字段',
    'app.dataRefreshSuccess': '数据刷新成功',
    'app.dataRefreshFailed': '刷新失败，请稍后重试',
    'app.progressUpdateSuccess': '进度更新成功',
    'app.progressUpdateFailed': '进度更新失败',
    'app.taskDateUpdateSuccess': '任务日期更新成功',
    'app.taskDateUpdateFailed': '日期更新失败',
    'app.baselineLoaded': '已加载初始基线',
    'app.performanceMode': '性能测试模式',
    'app.normalMode': '正常数据模式',
    'app.criticalPathComplete': '关键路径分析完成',
    'app.criticalPathFailed': '关键路径分析失败，请检查任务数据',
    'app.dependencyValid': '依赖验证通过',
    'app.dependencyValidationSummary': '依赖验证完成',
    'app.dependencyValidationFailed': '依赖验证失败，请检查依赖数据',
    'app.constraintValidated': '约束验证通过',
    'app.constraintValidationComplete': '约束验证完成',
    'app.totalTasks': '共检查 {count} 个任务',
    'app.violations': '{count} 个约束冲突',
    'app.warnings': '{count} 个警告',
    'app.criticalTaskCount': '找到 {count} 个关键任务',
    'app.projectDuration': '项目总工期',
    'app.days': '天',
    'app.dependencyWarningCount': '共 {count} 个警告',
    'app.dependencyHasErrors': '发现 {errors} 个错误，{warnings} 个警告',
    'app.dependencyHasErrors_en': 'Found {errors} errors, {warnings} warnings',
  },
  'zh-TW': {
    'app.title': '專案甘特圖管理系統',
    'app.newRootTask': '新建根任務',
    'app.customFields': '自定義字段',
    'app.hideBaseline': '隱藏基線',
    'app.showBaseline': '顯示基線',
    'app.saveBaseline': '保存基線',
    'app.performanceTest': '性能測試(1000條)',
    'app.normalData': '切換正常數據',
    'app.refreshData': '刷新數據',
    'app.criticalPath': '關鍵路徑分析',
    'app.dependencyValidation': '依賴驗證',
    'app.constraintValidation': '約束驗證',
    'app.currentLanguage': '當前語言',
    'app.locale.zh-CN': '簡體中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': '沒有可用的任務數據',
    'app.pleaseSaveBaseline': '請先保存基線',
    'app.baselineShown': '基線已顯示',
    'app.baselineHidden': '基線已隱藏',
    'app.baselineSaved': '基線已保存',
    'app.dependencyValidated': '依賴驗證完成',
    'app.criticalPathAnalyzed': '關鍵路徑分析完成',
    'app.constraintValidated': '約束驗證完成',
    'app.switchModeSuccess': '切換成功',
    'app.switchModeFailed': '切換失敗，請稍後重試',
    'app.fieldDeleteSuccess': '字段刪除成功',
    'app.addOption': '添加選項',
    'app.addField': '添加字段',
    'app.updateField': '更新字段',
    'app.saveFields': '保存字段',
    'app.dataRefreshSuccess': '數據刷新成功',
    'app.dataRefreshFailed': '刷新失敗，請稍後重試',
    'app.progressUpdateSuccess': '進度更新成功',
    'app.progressUpdateFailed': '進度更新失敗',
    'app.taskDateUpdateSuccess': '任務日期更新成功',
    'app.taskDateUpdateFailed': '日期更新失敗',
    'app.baselineLoaded': '已加載初始基線',
    'app.performanceMode': '性能測試模式',
    'app.normalMode': '正常數據模式',
    'app.criticalPathComplete': '關鍵路徑分析完成',
    'app.criticalPathFailed': '關鍵路徑分析失敗，請檢查任務數據',
    'app.dependencyValid': '依賴驗證通過',
    'app.dependencyValidationSummary': '依賴驗證完成',
    'app.dependencyValidationFailed': '依賴驗證失敗，請檢查依賴數據',
    'app.constraintValidated': '約束驗證通過',
    'app.constraintValidationComplete': '約束驗證完成',
    'app.totalTasks': '共檢查 {count} 個任務',
    'app.violations': '{count} 個約束衝突',
    'app.warnings': '{count} 個警告',
    'app.criticalTaskCount': '找到 {count} 個關鍵任務',
    'app.projectDuration': '項目總工期',
    'app.days': '天',
    'app.dependencyWarningCount': '共 {count} 個警告',
    'app.dependencyHasErrors': '發現 {errors} 個錯誤，{warnings} 個警告',
    'app.dependencyHasErrors_en': 'Found {errors} errors, {warnings} warnings',
  },
  'en-US': {
    'app.title': 'Project Gantt Management System',
    'app.newRootTask': 'New Root Task',
    'app.customFields': 'Custom Fields',
    'app.hideBaseline': 'Hide Baseline',
    'app.showBaseline': 'Show Baseline',
    'app.saveBaseline': 'Save Baseline',
    'app.performanceTest': 'Performance Test (1000)',
    'app.normalData': 'Switch to Normal Data',
    'app.refreshData': 'Refresh Data',
    'app.criticalPath': 'Critical Path Analysis',
    'app.dependencyValidation': 'Dependency Validation',
    'app.constraintValidation': 'Constraint Validation',
    'app.currentLanguage': 'Current Language',
    'app.locale.zh-CN': '简体中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': 'No task data available',
    'app.pleaseSaveBaseline': 'Please save a baseline first',
    'app.baselineShown': 'Baseline shown',
    'app.baselineHidden': 'Baseline hidden',
    'app.baselineSaved': 'Baseline saved',
    'app.dependencyValidated': 'Dependency validation completed',
    'app.criticalPathAnalyzed': 'Critical path analysis completed',
    'app.constraintValidated': 'Constraint validation completed',
    'app.switchModeSuccess': 'Switch successful',
    'app.switchModeFailed': 'Switch failed, please try again later',
    'app.fieldDeleteSuccess': 'Field deleted successfully',
    'app.addOption': 'Add option',
    'app.addField': 'Add field',
    'app.updateField': 'Update field',
    'app.saveFields': 'Save fields',
    'app.dataRefreshSuccess': 'Data refreshed successfully',
    'app.dataRefreshFailed': 'Refresh failed, please try again later',
    'app.progressUpdateSuccess': 'Progress updated successfully',
    'app.progressUpdateFailed': 'Progress update failed',
    'app.taskDateUpdateSuccess': 'Task date updated successfully',
    'app.taskDateUpdateFailed': 'Date update failed',
    'app.baselineLoaded': 'Initial baseline loaded',
    'app.performanceMode': 'Performance test mode',
    'app.normalMode': 'Normal data mode',
    'app.criticalPathComplete': 'Critical path analysis completed',
    'app.criticalPathFailed': 'Critical path analysis failed, please check task data',
    'app.dependencyValid': 'Dependency validation passed',
    'app.dependencyValidationSummary': 'Dependency validation completed',
    'app.dependencyValidationFailed': 'Dependency validation failed, please check dependency data',
    'app.constraintValidated': 'Constraint validation passed',
    'app.constraintValidationComplete': 'Constraint validation completed',
    'app.totalTasks': 'Checked {count} tasks',
    'app.violations': '{count} constraint violations',
    'app.warnings': '{count} warnings',
    'app.criticalTaskCount': 'Found {count} critical tasks',
    'app.projectDuration': 'Project duration',
    'app.days': 'days',
    'app.dependencyWarningCount': '{count} warnings',
    'app.dependencyHasErrors': 'Found {errors} errors, {warnings} warnings',
  },
  'ja-JP': {
    'app.title': 'プロジェクトガント管理システム',
    'app.newRootTask': '新規ルートタスク',
    'app.customFields': 'カスタムフィールド',
    'app.hideBaseline': 'ベースライン非表示',
    'app.showBaseline': 'ベースライン表示',
    'app.saveBaseline': 'ベースライン保存',
    'app.performanceTest': 'パフォーマンステスト(1000件)',
    'app.normalData': '通常データに切り替え',
    'app.refreshData': 'データ更新',
    'app.criticalPath': 'クリティカルパス分析',
    'app.dependencyValidation': '依存関係検証',
    'app.constraintValidation': '制約検証',
    'app.currentLanguage': '現在の言語',
    'app.locale.zh-CN': '简体中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': '利用可能なタスクデータがありません',
    'app.pleaseSaveBaseline': 'まずベースラインを保存してください',
    'app.baselineShown': 'ベースラインを表示しました',
    'app.baselineHidden': 'ベースラインを非表示にしました',
    'app.baselineSaved': 'ベースラインを保存しました',
    'app.dependencyValidated': '依存関係検証が完了しました',
    'app.criticalPathAnalyzed': 'クリティカルパス分析が完了しました',
    'app.constraintValidated': '制約検証が完了しました',
    'app.switchModeSuccess': '切り替え成功',
    'app.switchModeFailed': '切り替えに失敗しました、後ほど再度お試しください',
    'app.fieldDeleteSuccess': 'フィールド削除成功',
    'app.addOption': 'オプションを追加',
    'app.addField': 'フィールドを追加',
    'app.updateField': 'フィールドを更新',
    'app.saveFields': 'フィールドを保存',
    'app.dataRefreshSuccess': 'データ更新成功',
    'app.dataRefreshFailed': '更新に失敗しました、後ほど再度お試しください',
    'app.progressUpdateSuccess': '進捗更新成功',
    'app.progressUpdateFailed': '進捗更新失敗',
    'app.taskDateUpdateSuccess': 'タスク日付更新成功',
    'app.taskDateUpdateFailed': '日付更新失敗',
    'app.baselineLoaded': '初期ベースラインが読み込まれました',
    'app.performanceMode': 'パフォーマンステストモード',
    'app.normalMode': '通常データモード',
    'app.criticalPathComplete': 'クリティカルパス分析完了',
    'app.criticalPathFailed': 'クリティカルパス分析失敗、タスクデータを確認してください',
    'app.dependencyValid': '依存関係検証合格',
    'app.dependencyValidationSummary': '依存関係検証完了',
    'app.dependencyValidationFailed': '依存関係検証失敗、依存関係データを確認してください',
    'app.constraintValidated': '制約検証合格',
    'app.constraintValidationComplete': '制約検証完了',
    'app.totalTasks': '{count} タスクをチェック',
    'app.violations': '{count} 件の制約違反',
    'app.warnings': '{count} 件の警告',
  },
  'ko-KR': {
    'app.title': '프로젝트 간트 관리 시스템',
    'app.newRootTask': '새 루트 작업',
    'app.customFields': '사용자 정의 필드',
    'app.hideBaseline': '기준선 숨기기',
    'app.showBaseline': '기준선 표시',
    'app.saveBaseline': '기준선 저장',
    'app.performanceTest': '성능 테스트(1000개)',
    'app.normalData': '정상 데이터로 전환',
    'app.refreshData': '데이터 새로고침',
    'app.criticalPath': '핵심 경로 분석',
    'app.dependencyValidation': '종속성 검증',
    'app.constraintValidation': '제약 조건 검증',
    'app.currentLanguage': '현재 언어',
    'app.locale.zh-CN': '简体中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': '사용 가능한 작업 데이터가 없습니다',
    'app.pleaseSaveBaseline': '먼저 기준선을 저장하세요',
    'app.baselineShown': '기준선이 표시되었습니다',
    'app.baselineHidden': '기준선이 숨겨졌습니다',
    'app.baselineSaved': '기준선이 저장되었습니다',
    'app.dependencyValidated': '종속성 검증이 완료되었습니다',
    'app.criticalPathAnalyzed': '핵심 경로 분석이 완료되었습니다',
    'app.constraintValidated': '제약 조건 검증이 완료되었습니다',
    'app.switchModeSuccess': '切换成功',
    'app.switchModeFailed': '切换失败，请稍后重试',
    'app.fieldDeleteSuccess': '필드 삭제 성공',
    'app.addOption': '옵션 추가',
    'app.addField': '필드 추가',
    'app.updateField': '필드 업데이트',
    'app.saveFields': '필드 저장',
    'app.dataRefreshSuccess': '데이터 새로고침 성공',
    'app.dataRefreshFailed': '새로고침 실패, 나중에 다시 시도해주세요',
    'app.progressUpdateSuccess': '진행률 업데이트 성공',
    'app.progressUpdateFailed': '진행률 업데이트 실패',
    'app.taskDateUpdateSuccess': '작업 날짜 업데이트 성공',
    'app.taskDateUpdateFailed': '날짜 업데이트 실패',
    'app.baselineLoaded': '초기 기준선 로드됨',
    'app.performanceMode': '성능 테스트 모드',
    'app.normalMode': '정상 데이터 모드',
    'app.criticalPathComplete': '핵심 경로 분석 완료',
    'app.criticalPathFailed': '핵심 경로 분석 실패, 작업 데이터를 확인해주세요',
    'app.dependencyValid': '종속성 검증 통과',
    'app.dependencyValidationSummary': '종속성 검증 완료',
    'app.dependencyValidationFailed': '종속성 검증 실패, 종속성 데이터를 확인해주세요',
    'app.constraintValidated': '제약 조건 검증 통과',
    'app.constraintValidationComplete': '제약 조건 검증 완료',
    'app.totalTasks': '{count}개 작업 확인함',
    'app.violations': '{count}개 제약 조건 위반',
    'app.warnings': '{count}개 경고',
  },
  'fr-FR': {
    'app.title': 'Système de Gestion de Diagramme de Gantt',
    'app.newRootTask': 'Nouvelle Tâche Racine',
    'app.customFields': 'Champs Personnalisés',
    'app.hideBaseline': 'Masquer la Ligne de Base',
    'app.showBaseline': 'Afficher la Ligne de Base',
    'app.saveBaseline': 'Enregistrer la Ligne de Base',
    'app.performanceTest': 'Test de Performance (1000)',
    'app.normalData': 'Basculer vers les Données Normales',
    'app.refreshData': 'Actualiser les Données',
    'app.criticalPath': 'Analyse du Chemin Critique',
    'app.dependencyValidation': 'Validation des Dépendances',
    'app.constraintValidation': 'Validation des Contraintes',
    'app.currentLanguage': 'Langue Actuelle',
    'app.locale.zh-CN': '简体中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': 'Aucune donnée de tâche disponible',
    'app.pleaseSaveBaseline': 'Veuillez d\'abord enregistrer une ligne de base',
    'app.baselineShown': 'Ligne de base affichée',
    'app.baselineHidden': 'Ligne de base masquée',
    'app.baselineSaved': 'Ligne de base enregistrée',
    'app.dependencyValidated': 'Validation des dépendances terminée',
    'app.criticalPathAnalyzed': 'Analyse du chemin critique terminée',
    'app.constraintValidated': 'Validation des contraintes terminée',
    'app.switchModeSuccess': 'Changement réussi',
    'app.switchModeFailed': 'Échec du changement, veuillez réessayer plus tard',
    'app.fieldDeleteSuccess': 'Champ supprimé avec succès',
    'app.addOption': 'Ajouter une option',
    'app.addField': 'Ajouter un champ',
    'app.updateField': 'Mettre à jour le champ',
    'app.saveFields': 'Enregistrer les champs',
    'app.dataRefreshSuccess': 'Données actualisées avec succès',
    'app.dataRefreshFailed': 'Échec de l\'actualisation, veuillez réessayer plus tard',
    'app.progressUpdateSuccess': 'Progression mise à jour avec succès',
    'app.progressUpdateFailed': 'Échec de la mise à jour de la progression',
    'app.taskDateUpdateSuccess': 'Date de la tâche mise à jour avec succès',
    'app.taskDateUpdateFailed': 'Échec de la mise à jour de la date',
    'app.baselineLoaded': 'Ligne de base initiale chargée',
    'app.performanceMode': 'Mode de test de performance',
    'app.normalMode': 'Mode de données normal',
    'app.criticalPathComplete': 'Analyse du chemin critique terminée',
    'app.criticalPathFailed': 'Échec de l\'analyse du chemin critique, vérifiez les données des tâches',
    'app.dependencyValid': 'Validation des dépendances réussie',
    'app.dependencyValidationSummary': 'Validation des dépendances terminée',
    'app.dependencyValidationFailed': 'Échec de la validation des dépendances, vérifiez les données de dépendance',
    'app.constraintValidated': 'Validation des contraintes réussie',
    'app.constraintValidationComplete': 'Validation des contraintes terminée',
    'app.totalTasks': '{count} tâches vérifiées',
    'app.violations': '{count} violations de contraintes',
    'app.warnings': '{count} avertissements',
  },
  'de-DE': {
    'app.title': 'Projekt-Gantt-Verwaltungssystem',
    'app.newRootTask': 'Neue Stammaufgabe',
    'app.customFields': 'Benutzerdefinierte Felder',
    'app.hideBaseline': 'Basislinie ausblenden',
    'app.showBaseline': 'Basislinie anzeigen',
    'app.saveBaseline': 'Basislinie speichern',
    'app.performanceTest': 'Leistungstest (1000)',
    'app.normalData': 'Zu normalen Daten wechseln',
    'app.refreshData': 'Daten aktualisieren',
    'app.criticalPath': 'Kritische-Pfad-Analyse',
    'app.dependencyValidation': 'Abhängigkeitsvalidierung',
    'app.constraintValidation': 'Einschränkungsvalidierung',
    'app.currentLanguage': 'Aktuelle Sprache',
    'app.locale.zh-CN': '简体中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': 'Keine Aufgabendaten verfügbar',
    'app.pleaseSaveBaseline': 'Bitte speichern Sie zuerst eine Basislinie',
    'app.baselineShown': 'Basislinie angezeigt',
    'app.baselineHidden': 'Basislinie ausgeblendet',
    'app.baselineSaved': 'Basislinie gespeichert',
    'app.dependencyValidated': 'Abhängigkeitsvalidierung abgeschlossen',
    'app.criticalPathAnalyzed': 'Kritische-Pfad-Analyse abgeschlossen',
    'app.constraintValidated': 'Einschränkungsvalidierung abgeschlossen',
    'app.switchModeSuccess': 'Wechsel erfolgreich',
    'app.switchModeFailed': 'Wechsel fehlgeschlagen, bitte später erneut versuchen',
    'app.fieldDeleteSuccess': 'Feld erfolgreich gelöscht',
    'app.addOption': 'Option hinzufügen',
    'app.addField': 'Feld hinzufügen',
    'app.updateField': 'Feld aktualisieren',
    'app.saveFields': 'Felder speichern',
    'app.dataRefreshSuccess': 'Daten erfolgreich aktualisiert',
    'app.dataRefreshFailed': 'Aktualisierung fehlgeschlagen, bitte später erneut versuchen',
    'app.progressUpdateSuccess': 'Fortschritt erfolgreich aktualisiert',
    'app.progressUpdateFailed': 'Fortschrittsaktualisierung fehlgeschlagen',
    'app.taskDateUpdateSuccess': 'Aufgabendatum erfolgreich aktualisiert',
    'app.taskDateUpdateFailed': 'Datum aktualisieren fehlgeschlagen',
    'app.baselineLoaded': 'Ausgangsbasis geladen',
    'app.performanceMode': 'Leistungstestmodus',
    'app.normalMode': 'Normaler Datenmodus',
    'app.criticalPathComplete': 'Kritische-Pfad-Analyse abgeschlossen',
    'app.criticalPathFailed': 'Kritische-Pfad-Analyse fehlgeschlagen, bitte Aufgabendaten überprüfen',
    'app.dependencyValid': 'Abhängigkeitsvalidierung bestanden',
    'app.dependencyValidationSummary': 'Abhängigkeitsvalidierung abgeschlossen',
    'app.dependencyValidationFailed': 'Abhängigkeitsvalidierung fehlgeschlagen, bitte Abhängigkeitsdaten überprüfen',
    'app.constraintValidated': 'Einschränkungsvalidierung bestanden',
    'app.constraintValidationComplete': 'Einschränkungsvalidierung abgeschlossen',
    'app.totalTasks': '{count} Aufgaben überprüft',
    'app.violations': '{count} Einschränkungsverstöße',
    'app.warnings': '{count} Warnungen',
  },
  'es-ES': {
    'app.title': 'Sistema de Gestión de Diagramas de Gantt',
    'app.newRootTask': 'Nueva Tarea Raíz',
    'app.customFields': 'Campos Personalizados',
    'app.hideBaseline': 'Ocultar Línea Base',
    'app.showBaseline': 'Mostrar Línea Base',
    'app.saveBaseline': 'Guardar Línea Base',
    'app.performanceTest': 'Prueba de Rendimiento (1000)',
    'app.normalData': 'Cambiar a Datos Normales',
    'app.refreshData': 'Actualizar Datos',
    'app.criticalPath': 'Análisis de Ruta Crítica',
    'app.dependencyValidation': 'Validación de Dependencias',
    'app.constraintValidation': 'Validación de Restricciones',
    'app.currentLanguage': 'Idioma Actual',
    'app.locale.zh-CN': '简体中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': 'No hay datos de tareas disponibles',
    'app.pleaseSaveBaseline': 'Por favor, guarde primero una línea base',
    'app.baselineShown': 'Línea base mostrada',
    'app.baselineHidden': 'Línea base oculta',
    'app.baselineSaved': 'Línea base guardada',
    'app.dependencyValidated': 'Validación de dependencias completada',
    'app.criticalPathAnalyzed': 'Análisis de ruta crítica completado',
    'app.constraintValidated': 'Validación de restricciones completada',
    'app.switchModeSuccess': 'Cambio exitoso',
    'app.switchModeFailed': 'Cambio fallido, por favor intente de nuevo más tarde',
    'app.fieldDeleteSuccess': 'Campo eliminado exitosamente',
    'app.addOption': 'Agregar opción',
    'app.addField': 'Agregar campo',
    'app.updateField': 'Actualizar campo',
    'app.saveFields': 'Guardar campos',
    'app.dataRefreshSuccess': 'Datos actualizados exitosamente',
    'app.dataRefreshFailed': 'Actualización fallida, por favor intente de nuevo más tarde',
    'app.progressUpdateSuccess': 'Progreso actualizado exitosamente',
    'app.progressUpdateFailed': 'Actualización de progreso fallida',
    'app.taskDateUpdateSuccess': 'Fecha de tarea actualizada exitosamente',
    'app.taskDateUpdateFailed': 'Actualización de fecha fallida',
    'app.baselineLoaded': 'Línea base inicial cargada',
    'app.performanceMode': 'Modo de prueba de rendimiento',
    'app.normalMode': 'Modo de datos normal',
    'app.criticalPathComplete': 'Análisis de ruta crítica completado',
    'app.criticalPathFailed': 'Análisis de ruta crítica fallido, por favor verifique los datos de tareas',
    'app.dependencyValid': 'Validación de dependencias aprobada',
    'app.dependencyValidationSummary': 'Validación de dependencias completada',
    'app.dependencyValidationFailed': 'Validación de dependencias fallida, por favor verifique los datos de dependencias',
    'app.constraintValidated': 'Validación de restricciones aprobada',
    'app.constraintValidationComplete': 'Validación de restricciones completada',
    'app.totalTasks': '{count} tareas verificadas',
    'app.violations': '{count} violaciones de restricciones',
    'app.warnings': '{count} advertencias',
  },
  'ru-RU': {
    'app.title': 'Система Управления Диаграммами Ганта',
    'app.newRootTask': 'Новая Корневая Задача',
    'app.customFields': 'Пользовательские Поля',
    'app.hideBaseline': 'Скрыть Базовую Линию',
    'app.showBaseline': 'Показать Базовую Линию',
    'app.saveBaseline': 'Сохранить Базовую Линию',
    'app.performanceTest': 'Тест Производительности (1000)',
    'app.normalData': 'Переключиться на Обычные Данные',
    'app.refreshData': 'Обновить Данные',
    'app.criticalPath': 'Анализ Критического Пути',
    'app.dependencyValidation': 'Проверка Зависимостей',
    'app.constraintValidation': 'Проверка Ограничений',
    'app.currentLanguage': 'Текущий Язык',
    'app.locale.zh-CN': '简体中文',
    'app.locale.zh-TW': '繁體中文',
    'app.locale.en-US': 'English',
    'app.locale.ja-JP': '日本語',
    'app.locale.ko-KR': '한국어',
    'app.locale.fr-FR': 'Français',
    'app.locale.de-DE': 'Deutsch',
    'app.locale.es-ES': 'Español',
    'app.locale.ru-RU': 'Русский',
    'app.noData': 'Нет доступных данных задач',
    'app.pleaseSaveBaseline': 'Пожалуйста, сначала сохраните базовую линию',
    'app.baselineShown': 'Базовая линия показана',
    'app.baselineHidden': 'Базовая линия скрыта',
    'app.baselineSaved': 'Базовая линия сохранена',
    'app.dependencyValidated': 'Проверка зависимостей завершена',
    'app.criticalPathAnalyzed': 'Анализ критического пути завершён',
    'app.constraintValidated': 'Проверка ограничений завершена',
    'app.switchModeSuccess': 'Переключение успешно',
    'app.switchModeFailed': 'Переключение не удалось, пожалуйста, повторите позже',
    'app.fieldDeleteSuccess': 'Поле успешно удалено',
    'app.addOption': 'Добавить опцию',
    'app.addField': 'Добавить поле',
    'app.updateField': 'Обновить поле',
    'app.saveFields': 'Сохранить поля',
    'app.dataRefreshSuccess': 'Данные успешно обновлены',
    'app.dataRefreshFailed': 'Обновление не удалось, пожалуйста, повторите позже',
    'app.progressUpdateSuccess': 'Прогресс успешно обновлён',
    'app.progressUpdateFailed': 'Не удалось обновить прогресс',
    'app.taskDateUpdateSuccess': 'Дата задачи успешно обновлена',
    'app.taskDateUpdateFailed': 'Не удалось обновить дату',
    'app.baselineLoaded': 'Загружена начальная базовая линия',
    'app.performanceMode': 'Режим тестирования производительности',
    'app.normalMode': 'Режим нормальных данных',
    'app.criticalPathComplete': 'Анализ критического пути завершён',
    'app.criticalPathFailed': 'Анализ критического пути не удался, проверьте данные задач',
    'app.dependencyValid': 'Проверка зависимостей пройдена',
    'app.dependencyValidationSummary': 'Проверка зависимостей завершена',
    'app.dependencyValidationFailed': 'Проверка зависимостей не удалась, проверьте данные зависимостей',
    'app.constraintValidated': 'Проверка ограничений пройдена',
    'app.constraintValidationComplete': 'Проверка ограничений завершена',
    'app.totalTasks': 'Проверено задач: {count}',
    'app.violations': '{count} нарушений ограничений',
    'app.warnings': '{count} предупреждений',
  }
}

const currentLocale = ref<Locale>('zh-CN')

const savedLocale = localStorage.getItem('app-locale') as Locale
if (savedLocale && messages[savedLocale]) {
  currentLocale.value = savedLocale
} else {
  const browserLang = navigator.language || (navigator as any).userLanguage
  const localeMap: Record<string, Locale> = {
    zh: 'zh-CN', 'zh-CN': 'zh-CN', 'zh-Hans': 'zh-CN',
    'zh-TW': 'zh-TW', 'zh-Hant': 'zh-TW', 'zh-HK': 'zh-TW',
    en: 'en-US', 'en-US': 'en-US', 'en-GB': 'en-US',
    ja: 'ja-JP', 'ja-JP': 'ja-JP',
    ko: 'ko-KR', 'ko-KR': 'ko-KR',
    fr: 'fr-FR', 'fr-FR': 'fr-FR',
    de: 'de-DE', 'de-DE': 'de-DE',
    es: 'es-ES', 'es-ES': 'es-ES',
    ru: 'ru-RU', 'ru-RU': 'ru-RU',
  }
  const langPrefix = browserLang.split('-')[0]
  currentLocale.value = localeMap[browserLang] || localeMap[langPrefix] || 'zh-CN'
}

export function t(key: string): string {
  return messages[currentLocale.value]?.[key] || messages['zh-CN']?.[key] || key
}

export function setLocale(locale: Locale) {
  if (messages[locale]) {
    currentLocale.value = locale
    localStorage.setItem('app-locale', locale)
  }
}

export function getLocale(): Locale {
  return currentLocale.value
}

export function useI18n() {
  const locale = computed(() => currentLocale.value)
  return { locale, t, setLocale, getLocale }
}
